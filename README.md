## ğŸ’¡ ìš°ë¦¬ê°€ ë§Œë“  ì„œë¹„ìŠ¤ëŠ”?

### ğŸ™ï¸ **ì¹˜ë§¤ ì˜ˆë°©ì„ ìœ„í•œ ìŒì„± ëŒ€í™” ê¸°ë°˜ AI ì±—ë´‡**

ê³ ë ¹í™”ê°€ ì‹¬ê°í•œ ì§€ì—­, **ì˜ì„±êµ°**ì˜ í˜„ì‹¤ì„ ë§ˆì£¼í•˜ê³   
â€œ**ê¸°ìˆ ë¡œ ê³ ë¦½ëœ ë…¸ë…„ì¸µì˜ ì¼ìƒì— ì–´ë–»ê²Œ í˜ì„ ì¤„ ìˆ˜ ìˆì„ê¹Œ?**â€  
ë¼ëŠ” ì§ˆë¬¸ì—ì„œ ì¶œë°œí–ˆìŠµë‹ˆë‹¤.

---

## ğŸŒ¿ í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜

![í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜](./img/KakaoTalk_20250629_044330610.png)

### ğŸ“‹ ì•„í‚¤í…ì²˜ ì„¤ëª…

**3-Tier ì•„í‚¤í…ì²˜**ë¡œ êµ¬ì„±ëœ í’€ìŠ¤íƒ ì‹œìŠ¤í…œ:

1. **Frontend (Next.js + TypeScript)**
   - ê³ ë ¹ì¸µ ì¹œí™”ì  UI/UX
   - ìŒì„± ì¸ì‹ ë° TTS ê¸°ëŠ¥
   - ë°˜ì‘í˜• ì›¹ ë””ìì¸

2. **Backend (Spring Boot + Java)**
   - RESTful API ì„œë²„
   - ì´ë©”ì¼ ì•Œë¦¼ ì‹œìŠ¤í…œ
   - ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬

3. **AI Service (Python + FastAPI)**
   - ë©€í‹° ì—ì´ì „íŠ¸ êµ¬ì¡°
   - Gemini API ì—°ë™
   - ìŒì„± ë¶„ì„ ë° ì¹˜ë§¤ ê²€ì‚¬

---

## ğŸ¤– ë©€í‹° ì—ì´ì „íŠ¸ êµ¬ì¡° ì•„í‚¤í…ì²˜

![ë©€í‹° ì—ì´ì „íŠ¸ êµ¬ì¡°](./img/KakaoTalk_20250629_032052081.png)

### ğŸ”„ ì—ì´ì „íŠ¸ í”Œë¡œìš°

**Supervisor Agent**ê°€ ì‚¬ìš©ì ì…ë ¥ì„ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ ì „ë¬¸ Agentë¡œ ë¼ìš°íŒ…:

1. **ì¹˜ë§¤ ë° ë‡Œì¡¸ì¤‘ íŒë‹¨ Agent**
   - DBì— ì €ì¥ëœ ëŒ€í™” ë‚´ì—­ ë¶„ì„ìœ¼ë¡œ ê¸°ì–µë ¥ ê°í‡´ ì—¬ë¶€ íŒë‹¨
   - ë‡Œì¡¸ì¤‘ í™˜ì ì˜¤ë””ì˜¤ ë°ì´í„°ì…‹ ê¸°ë°˜ Vector Embeddingìœ¼ë¡œ ë‡Œì¡¸ì¤‘ ì—¬ë¶€ íŒë‹¨

2. **ë³µì•½ ì—¬ë¶€ íŒë‹¨ Agent**
   - ëŒ€í™”ë‚´ì—­ í† ëŒ€ë¡œ ë…¸ì¸ì´ ì•½ì„ ë¨¹ì—ˆëŠ”ì§€ íŒë‹¨

3. **ê¸°ë¶„, ê±´ê°•ìƒíƒœ ì²´í¬ Agent**
   - ëŒ€í™”ë‚´ì—­ ë¶„ì„ìœ¼ë¡œ ê¸°ë¶„, ê±´ê°•ìƒíƒœ ì²´í¬ íŒë‹¨

---

## ğŸŒ¿ ì£¼ìš” ê¸°ëŠ¥

- **ìì—°ì–´ ê¸°ë°˜ ëŒ€í™” ì¸í„°í˜ì´ìŠ¤**  
  â†’ ê³ ë ¹ì¸µ ì¹œí™”ì  UX

- **ë©€í‹°ì—ì´ì „íŠ¸ êµ¬ì¡°**  
  â†’ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ í†µí•œ ê¸°ëŠ¥ ë¶„ë¦¬ ë° ì„±ëŠ¥ í–¥ìƒ

- **í•µì‹¬ Agents**  
  - `Supervisor Agent` â†’ ì‚¬ìš©ì ì˜ë„ ë¶„ì„ ë° ì ì ˆí•œ Agentë¡œ ë¼ìš°íŒ…
  - `ì¹˜ë§¤ ë° ë‡Œì¡¸ì¤‘ íŒë‹¨ Agent` â†’ ê¸°ì–µë ¥ ê°í‡´ ë° ë‡Œì¡¸ì¤‘ ì§•í›„ ë¶„ì„
  - `ë³µì•½ ì—¬ë¶€ íŒë‹¨ Agent` â†’ ë³µì•½ ìƒíƒœ ëª¨ë‹ˆí„°ë§
  - `ê¸°ë¶„, ê±´ê°•ìƒíƒœ ì²´í¬ Agent` â†’ ì •ì‹  ê±´ê°• ë° ì‹ ì²´ ìƒíƒœ ë¶„ì„

- **MVP ì‹œë‚˜ë¦¬ì˜¤ í”Œë¡œìš°**  
  `ìŒì„± ëŒ€í™” â†’ ëŒ€í™” ë‚´ìš© ë¶„ì„ â†’ ê±´ê°• ìƒíƒœ ì§„ë‹¨ â†’ ë³´í˜¸ì ì•Œë¦¼ ë° ë¦¬í¬íŠ¸ ì „ì†¡`

---

## ğŸ› ï¸ í•µì‹¬ ì½”ë“œ ë¶„ì„

### ğŸ”§ AI Service (Garlic-Holic-AI)

#### ë©”ì¸ í†µí•© API (`main_final.py`)
```python
# ë©€í‹° ì—ì´ì „íŠ¸ êµ¬ì¡°ì˜ í•µì‹¬
class State(MessagesState):
    next: str = "supervisor"
    service_type: Optional[str] = None
    selected_agent: Optional[str] = None
    executed_agents: list = []
    dementia_result: Optional[dict] = None
    medicine_result: Optional[dict] = None
    mood_result: Optional[dict] = None

# Supervisor Agent - ì‚¬ìš©ì ì˜ë„ ë¶„ì„ ë° ë¼ìš°íŒ…
def supervisor_node(state: State) -> Command[Literal[*members, "__end__"]]:
    # ì‚¬ìš©ì ë©”ì‹œì§€ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ Agent ì„ íƒ
    # ì¹˜ë§¤ ê²€ì‚¬, ë³µì•½ ì•Œë¦¼, ê¸°ë¶„ ì²´í¬ ì¤‘ ë¶„ë¥˜
```

#### ì¹˜ë§¤ ê²€ì‚¬ ì‹œìŠ¤í…œ (`langgraph_dementia_check.py`)
```python
# ë°œìŒ ì–´ëˆŒí•¨ ê²€ì‚¬
def check_pronunciation_clarity(state: DementiaCheckState):
    # MFCC íŠ¹ì§• ì¶”ì¶œë¡œ ë°œìŒ ëª…í™•ë„ ë¶„ì„
    # ì •ìƒ ë°œìŒ ê¸°ì¤€ê³¼ ìœ ì‚¬ë„ ê³„ì‚°

# ê¸°ì–µë ¥ ê²€ì‚¬
def check_memory_recall(state: DementiaCheckState):
    # 3ì¼ ì´ë‚´ ê³¼ê±° ëŒ€í™”ì™€ í˜„ì¬ ëŒ€í™” ë¹„êµ
    # ê¸°ì–µë ¥ ì ìˆ˜ ì‚°ì¶œ (0.0-1.0)

# ë°˜ë³µ ë°œí™” ê²€ì‚¬
def check_repetitive_speech(state: DementiaCheckState):
    # ê°™ì€ ë¬¸ì¥ ë°˜ë³µ íŒ¨í„´ íƒì§€
    # ì¹˜ë§¤ ì§•í›„ ë¶„ì„
```

### ğŸ”§ Backend (Garlic-Holic-Backend)

#### ìŒì„± ì²˜ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬ (`VoiceController.java`)
```java
@RestController
@RequiredArgsConstructor
public class VoiceController {
    private final VoiceCoreService voiceCoreService;

    @PostMapping("/voice-chat")
    public ApiResponse<?> handleAudioUpload(@RequestParam("audio") MultipartFile audioFile) {
        // ìŒì„± íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        // AI ì„œë²„ë¡œ ì „ë‹¬í•˜ì—¬ ë¶„ì„ ìš”ì²­
        DiagnosisResponse diagnosisResponse = voiceCoreService.chat(audioFile);
        return ApiResponse.success(CheckDementiaResponse.of(diagnosisResponse));
    }
}
```

#### ì´ë©”ì¼ ì•Œë¦¼ ì‹œìŠ¤í…œ (`MailController.java`)
```java
@GetMapping("/mail")
public ApiResponse<?> sendMail() throws MessagingException {
    // ì˜¤ëŠ˜ì˜ ëŒ€í™” ë°ì´í„° ìˆ˜ì§‘
    String text = concatTodayFields(1L);
    
    // AI ì„œë²„ì—ì„œ ìš”ì•½ ë° ë¶„ì„ ìš”ì²­
    SummarizeResult result = aiServer.postSummery(text);
    
    // ë³´í˜¸ìì—ê²Œ ì´ë©”ì¼ ë°œì†¡
    ReportMailData reportMailData = new ReportMailData(
        LocalDateFormatter.fromLocalDateTime(LocalDateTime.now()),
        result.isDementia_suspicion() ? "ì¹˜ë§¤ ì˜ì‹¬" : "ì •ìƒ",
        result.getSummary()
    );
    mailCoreService.sendMail("ë³´í˜¸ìì´ë©”ì¼", reportMailData);
}
```

### ğŸ”§ Frontend (Garlic-Holic-Frontend)

#### ë©”ì¸ í˜ì´ì§€ (`page.tsx`)
```typescript
// ìŒì„± ì¸ì‹ ë° TTS í†µí•© ì¸í„°í˜ì´ìŠ¤
const handleNuriClick = async () => {
  // ëˆ„ë¦¬ ìºë¦­í„° í´ë¦­ ì‹œ ëœë¤ ì¸ì‚¬ë§
  const greetings = [
    "ì•ˆë…•í•˜ì„¸ìš” ì˜ˆì •ë‹˜! ì €ëŠ” ëˆ„ë¦¬ì˜ˆìš”~",
    "ì˜¤ëŠ˜ë„ ê±´ê°•í•œ í•˜ë£¨ ë³´ë‚´ì„¸ìš”!",
    "ëˆ„ë¦¬ê°€ ì–¸ì œë‚˜ ì˜ˆì •ë‹˜ê³¼ í•¨ê»˜í• ê²Œìš”!"
  ];
  
  const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];
  
  // Google TTS ìš°ì„ , ì‹¤íŒ¨ì‹œ ë¸Œë¼ìš°ì € TTS
  try {
    await speakText(randomGreeting, true);
  } catch {
    speakTextBrowser(randomGreeting);
  }
};
```

#### ìŒì„± ì—…ë¡œë“œ ì»´í¬ë„ŒíŠ¸ (`AudioUploader.tsx`)
```typescript
const uploadAudio = async () => {
  const blob = new Blob(audioChunksRef.current, { type: 'audio/webm' });
  
  const data = new FormData();
  data.append('audio', blob, 'rec.webm');

  // ë°±ì—”ë“œ APIë¡œ ìŒì„± íŒŒì¼ ì „ì†¡
  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/voice-chat`,
    { method: 'POST', body: data }
  );
};
```

---

## ğŸ› ï¸ ê¸°ìˆ ì ìœ¼ë¡œ ë„ì „í–ˆë˜ ì 

- **Gemini API í™œìš©**  
  - ìŒì„± ì¸ì‹ â†’ ìì—°ì–´ ì´í•´ â†’ ìƒí™©ë³„ ì‘ë‹µ ìƒì„±

- **GCP ê¸°ë°˜ ì„œë²„ ë°°í¬ & ì‹¤ì‹œê°„ ë°ëª¨ ì œê³µ**

- **ë©€í‹°ì—ì´ì „íŠ¸ êµ¬ì¡° ì„¤ê³„**  
  - ë³‘ë ¬ ëŒ€í™” ì²˜ë¦¬ & ë¹„ë™ê¸° ë¦¬í¬íŠ¸ ìƒì„±ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ 

- **í’€ìŠ¤íƒ ì—°ë™ ì§ì ‘ êµ¬í˜„**  
  - Docker ê¸°ë°˜ í†µí•© API êµ¬ì„± ë° ì„œë²„ ì—°ê²°ê¹Œì§€ ìì²´ ì²˜ë¦¬

---

## ğŸ™Œ í•´ì»¤í†¤ ì†Œê°

- ì„œë¡œ ì²˜ìŒ ë³¸ íŒ€ì›ì´ì—ˆì§€ë§Œ,  
  **ë””ìì´ë„ˆ, ê¸°íšì, í”„ë¡ íŠ¸, ë°±ì—”ë“œ, AI ì—”ì§€ë‹ˆì–´**ê°€ í•˜ë‚˜ì²˜ëŸ¼ í˜‘ì—…
- ë°œí‘œ ì‹œê°„ ì œì•½ìœ¼ë¡œ ë°ëª¨ëŠ” ìƒëµë˜ì—ˆì§€ë§Œ,  
  **ê¸°ìˆ ì„±ê³¼ ì™„ì„±ë„**ë¥¼ ë†’ì´ í‰ê°€ë°›ì•„ **ìš°ìˆ˜ìƒ**ì„ ìˆ˜ìƒí–ˆìŠµë‹ˆë‹¤.
- ê¸°ìˆ ì„ í†µí•´ ì‚¬íšŒë¬¸ì œë¥¼ í•´ê²°í•´ë³´ëŠ” ê°’ì§„ ê²½í—˜ì´ì—ˆìŠµë‹ˆë‹¤ ğŸ’ª